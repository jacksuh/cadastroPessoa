<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Cadastro de Pessoas</title>
    <!-- aqui ligamos o CSS -->
    <h:outputStylesheet library="css" name="style.css" />
</h:head>

<h:body>
    <div class="page-wrapper">

        <h1>Cadastro de Pessoas</h1>

        <!-- CARD 1: Cadastro manual de pessoa -->
        <div class="card">
            <h2>Nova Pessoa (sem Excel)</h2>

            <h:form>
                <div class="form-row">
                    <h:outputLabel value="Nome:" for="nome"/>
                    <h:inputText id="nome"
                                 value="#{pessoaBean.pessoa.nome}"
                                 styleClass="input-text" />
                </div>

                <div class="form-actions">
                    <h:commandButton value="Salvar"
                                     action="#{pessoaBean.salvar}"
                                     styleClass="btn btn-primary" />
                </div>
            </h:form>
        </div>

        <!-- CARD 2: Consulta CEP -->
        <div class="card">
            <h2>Consulta CEP</h2>

            <h:form id="formCep">
                <div class="form-row">
                    <h:outputLabel value="CEP:" for="cep"/>
                    <h:inputText id="cep"
                                 value="#{cepBean.cep}"
                                 styleClass="input-text" />
                </div>

                <div class="form-actions">
                    <h:commandButton value="Buscar CEP"
                                     action="#{cepBean.consultar}"
                                     styleClass="btn btn-secondary" />
                </div>

                <h:panelGroup rendered="#{not empty cepBean.endereco}">
                    <h3>Endereço encontrado:</h3>
                    <div class="cep-grid">
                        <span><strong>Logradouro:</strong></span>
                        <span>#{cepBean.endereco.logradouro}</span>

                        <span><strong>Bairro:</strong></span>
                        <span>#{cepBean.endereco.bairro}</span>

                        <span><strong>Cidade:</strong></span>
                        <span>#{cepBean.endereco.localidade}</span>

                        <span><strong>UF:</strong></span>
                        <span>#{cepBean.endereco.uf}</span>
                    </div>
                </h:panelGroup>
            </h:form>
        </div>

        <!-- CARD 3: Importação Excel -->
        <div class="card">
            <h2>Importar Pessoas via Excel</h2>

            <h:form enctype="multipart/form-data">
                <div class="form-row">
                    <h:outputLabel for="arquivoExcel" value="Arquivo (.xlsx):" />
                    <h:inputFile id="arquivoExcel"
                                 value="#{pessoaBean.arquivoExcel}"
                                 styleClass="input-file" />
                </div>

                <div class="form-actions">
                    <h:commandButton value="Importar Excel"
                                     action="#{pessoaBean.importarExcel}"
                                     styleClass="btn btn-secondary" />
                </div>
            </h:form>
        </div>

        <!-- CARD 4: Lista de pessoas -->
        <div class="card">
            <h2>Lista de Pessoas</h2>

            <h:dataTable value="#{pessoaBean.pessoas}" var="p"
                         styleClass="table"
                         headerClass="table-header"
                         rowClasses="table-row">
                <h:column>
                    <f:facet name="header">ID</f:facet>
                    #{p.id}
                </h:column>
                <h:column>
                    <f:facet name="header">Nome</f:facet>
                    #{p.nome}
                </h:column>
            </h:dataTable>
        </div>

    </div>
</h:body>
</html>
